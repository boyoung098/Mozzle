<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mozzle.web.dao.manage.ManageDaoImpl">
	
	<insert id="registMozzle" parameterType="mDto">
		<selectKey keyProperty="seq" resultType="java.lang.Integer" order="BEFORE">
			SELECT MOZZLE_SEQ.NEXTVAL FROM DUAL
		</selectKey>
			INSERT INTO MOZZLE
						(MOZZLE_ID, MOZZLE_NAME, 
						<if test="mozzle_intro != null">
							MOZZLE_INTRO, 
						</if>
						<if test="image_orgin != null">
						IMAGE_ORIGIN, IMAGE_SAVED,
						</if>
						CREATE_DATE, CATEGORY_CODE, 
						STATE, DELFLAG)
				VALUES(#{seq}, #{mozzle_id}, 
						#{mozzle_name},
						<if test="mozzle_intro != null">
						 	#{mozzle_intro}, 
						</if>
						<if test="image_orgin != null">
						#{image_origin}, #{image_saved}
						</if>
						SYSDATE, #{category_code}, #{state}, 'N')	
	</insert>

	
	<select id="selectMozzleByCreatDate" resultType="mDto">
		SELECT MOZZLE_ID, MOZZLE_NAME, 
			MOZZLE_INTRO, CREATE_DATE, IMAGE_SAVED, 
			CATEGORY_CODE, STATE
		FROM MOZZLE
		ORDER BY CREATE_DATE DESC
	</select>


</mapper>